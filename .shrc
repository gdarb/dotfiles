# ~~ shell config ~~

# work out which OS we're in
OS="`uname`"
case $OS in
    'Darwin')
        # set ls to show colour
        alias ls="ls -G"

        # have python & pip -> python3 & pip3
        export PATH="/usr/local/opt/python/libexec/bin:$PATH"

        # use the homebrew ruby & gem
        export PATH="/usr/local/opt/ruby/bin:$PATH"

        # add MacVim to $PATH to enable `mvim` / `gvim` in terminal
        # Note: added to end of $PATH as to not override Homebrew's vim
        export PATH="$PATH:/Applications/MacVim.app/Contents/bin"

        # alias for all updating of homebrew
        alias brewify="brew update; brew upgrade; brew cask upgrade; brew cleanup"
    ;;
    'Linux')
        alias ls="ls --color=auto"
    ;;
    *)
    ;;
esac

# have GPG ask for passphrase in terminal
export GPG_TTY=$(tty)

# use a long listing format
alias ll="ls -la"

# use `config` for managing dotfiles in git
alias config="git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME"

# set $WORKON_HOME (just in case)
export WORKON_HOME="$HOME/.virtualenvs"

# activate virtualenvwrapper
if [[ -r /usr/local/bin/virtualenvwrapper.sh ]]; then
	export VIRTUALENVWRAPPER_PYTHON=$(which python3)
	source /usr/local/bin/virtualenvwrapper.sh
fi

# pip should only run if there is a virtualenv currently activated
export PIP_REQUIRE_VIRTUALENV=true

# use `gpip` to force installation of a package in the global python environment
gpip(){
    PIP_REQUIRE_VIRTUALENV="" pip "$@"
}

# alternative `pip3` version
gpip3(){
    PIP_REQUIRE_VIRTUALENV="" pip3 "$@"
}
